{% extends "smarthome/base.html" %}

{% block title %}Home - SmartHome{% endblock %}

{% block content %}
<h1>Your devices:</h1>

{% if devices %}
    <ul>
        {% for device in devices %}
            <li>
                <a href="{% url 'devices:details' device.id %}">
                    {{ device.device_name }} ({{ device.device_type }}{% if device.device_room %} - {{ device.device_room }}{% endif %}) 
                </a>                 
                <form method="get" action="{% url 'devices:edit_device' device.id %}" style="display:inline;">
                    <button type="submit">Edit</button>
                </form>
                <form method="POST" action="{% url 'devices:delete_device' device.id %}" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit" onclick="return confirm('Are you sure you want to delete this device?')">Delete</button>
                </form>
            </li>
        {% endfor %}
    </ul>
{% else %}
    <p>You have no devices yet.</p>
{% endif %}

<button onclick="window.location='{% url 'devices:new_device' %}'">+ Add device</button>
<p/>

<form method="POST" action="{% url 'smarthome:home' %}">
    {% csrf_token %}
    <button type="submit">Back to user panel</button>
</form>
{% endblock %}
