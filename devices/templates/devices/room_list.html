{% extends "smarthome/base_user.html" %}

{% block title %}Rooms - SmartHome{% endblock %}

{% block content %}
<div class="header"><h2>Rooms:</h2></div>

<div class="content">
<div class="center">
{% if rooms %}
<ul class="rooms">
    {% for room in rooms %}
        <li>
            {{ room.room_name }} 
            <form method="POST" action="{% url 'devices:delete_room' room.id %}" style="display:inline;">
                {% csrf_token %}
                <button class="buttonDelete" type="submit" onclick="return confirm('Are you sure you want to delete this room?')">Delete</button>
            </form>
            <ul>
            {% for device in devices %}
                {% if device.device_room.room_name == room.room_name %}
                    <li>{{ device.device_name }}
                        {% if user.is_staff %}({{ device.device_user }}){% endif %}
                    </li>
                {% endif %}
            {% endfor %}
            </ul>
        </li>
    {% endfor %}
</ul>
{% else %}
<p>No rooms set.</p>
{% endif %}
</div>
<div class="addRoom">
<form method="POST" style="display:inline;">
    {% csrf_token %}
    <input type="text" name="name" placeholder="Room name" required>
    <button type="submit">+ Add Room</button>
</form>
</div>
{% if error %}
<p class="error">{{ error }}</p>
{% endif %}


</div>
{% endblock %}